<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  
  <!-- 검색 엔진 최적화 (SEO) -->
  <meta name="description" content="FC모바일 특성 재료 정보: 예리한 감아차기, 패스 마스터, 라인 브레이커등 특성 재료 선수 정보. fc모바일 예리한 감아치기 선수, fc모바일 화려한 걷어내기 선수, fc모바일 화려한 볼컨트롤, fc모바일 라인브레이커 선수, fc모바일 슬라이딩 태클 선호 선수, 피모 특성, 피파모바일, 피모, 피파모바일 특성, fc모바일 특성 트레이닝, fc모바일 특성 선수, fc모바일 특성 설명">
  <meta name="keywords" content="FC모바일, 특성 재료, 패스 마스터, 라인 브레이커, 예리한 감아차기, 선수 정보, 오버롤, 넥슨">
  <meta name="author" content="해리지팡이">
  
  <!-- Open Graph 데이터 -->
  <meta property="og:title" content="FC모바일 특성 재료와 선수 정보">
  <meta property="og:description" content="FC모바일 특성 재료와 관련된 모든 정보를 제공합니다. 주요 특성과 선수 추천 오버롤을 확인하세요.">
  <meta property="og:image" content="https://kritikal619.github.io/logo/Favicon.png">
  <meta property="og:url" content="https://kritikal619.github.io/trait/">
  <meta property="og:site_name" content="FC모바일 특성 정보">
  <meta property="og:type" content="website">
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="./favicons/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="./favicons/favicon.svg" />
  <link rel="shortcut icon" href="./favicons/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="./favicons/apple-touch-icon.png" />
  <meta name="apple-mobile-web-app-title" content="피모 특성" />
  <link rel="manifest" href="./favicons/site.webmanifest" />
  
  <!-- 검증 메타 -->
  <meta name="google-site-verification" content="mI4G1pPTEE7nMyQzFuWm0l5_AHAQiODcfXhTXQ2YMAc">
  <meta name="naver-site-verification" content="47688a76eda92be8c9ba8435f8b91c9598a1bfc0">
  
  <!-- 외부 라이브러리 -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.14.0-beta2/js/bootstrap-select.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <title>FC모바일 수수료 계산기</title>
   <style>
    :root{
      --bg:#f6f6f7;--fg:#111827;--muted:#6b7280;--card:#ffffff;--border:#e5e7eb;--accent:#10b981;--accent-weak:#ecfdf5;
      --radius:16px;--shadow:0 4px 16px rgba(0,0,0,.06);
    }
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Pretendard,Apple SD Gothic Neo,Noto Sans KR,sans-serif}
    .container{max-width:880px;margin:0 auto;padding:40px 16px}
    h1{font-size:28px;margin:0 0 6px}
    .subtitle{color:var(--muted);font-size:13px;margin:0 0 20px}
    .grid{display:grid;gap:16px}
    @media (min-width:768px){.grid.cols-2{grid-template-columns:1fr 1fr}}

    .card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);padding:20px}
    .label{font-size:13px;color:var(--fg);font-weight:600;margin-bottom:8px}
    .help{font-size:12px;color:var(--muted);margin-top:6px}

    .input{width:100%;padding:14px 48px 14px 14px;border:1px solid var(--border);border-radius:12px;outline:none}
    .input:focus{box-shadow:0 0 0 6px rgba(16,185,129,.15);border-color:#a7f3d0}
    .suffix{position:absolute;right:12px;top:50%;transform:translateY(-50%);color:var(--muted);font-size:14px}
    .field{position:relative}

    .vip-row{display:flex;flex-wrap:wrap;gap:8px}
    .chip{border:1px solid var(--border);background:#fff;border-radius:12px;padding:8px 12px;font-size:13px;cursor:pointer}
    .chip[aria-pressed="true"]{border-color:#059669;background:var(--accent-weak);color:#065f46;font-weight:600}

    .value{font-size:22px;font-weight:700}
    .value.sm{font-size:18px}

    .row{display:flex;gap:12px;align-items:center}
    .btn{border:0;border-radius:12px;padding:10px 14px;cursor:pointer}
    .btn.primary{background:#059669;color:#fff}
    .btn.primary:hover{background:#047857}
    .btn.ghost{background:#e5e7eb}
    .btn.ghost:hover{background:#d1d5db}

    .note{font-size:12px;color:var(--muted)}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>FC모바일 수수료 계산기</h1>
      <p class="subtitle">FC모바일 이적시장 수수료를 계산할 수 있습니다./p>
    </header>

    <div class="grid">
      <!-- 선수 가격 -->
      <section class="card">
        <div class="label">선수 가격</div>
        <div class="field">
          <input id="price" class="input" type="text" inputmode="numeric" placeholder="0" />
          <span class="suffix">TP</span>
        </div>
      </section>

      <!-- VIP 등급 -->
      <section class="card">
        <div class="label">VIP 등급</div>
        <div class="vip-row" id="vipRow"></div>
        <div class="help">수수료 금액에서 등급별 할인율만큼 차감됩니다.</div>
      </section>

      <!-- 결과 카드 -->
      <section class="grid cols-2">
        <div class="card">
          <div class="label">수수료 (40%)</div>
          <div id="fee" class="value">0 TP</div>
        </div>
        <div class="card">
          <div class="label">등급 혜택 (할인)</div>
          <div id="vipDiscount" class="value">0 TP</div>
          <div id="vipRateText" class="help">현재 그룹 할인율: 0%</div>
        </div>
        <div class="card" style="grid-column:1/-1">
          <div class="label">판매 금액</div>
          <div id="netSale" class="value">0 TP</div>
          <div class="help">계산식: 선수 가격 − (수수료 − 등급 할인)</div>
        </div>
      </section>

      <!-- 페이백 -->
      <section class="card">
        <div class="grid cols-2">
          <div>
            <div class="label">페이백 (%)</div>
            <div class="field">
              <input id="paybackPct" class="input" type="number" min="0" max="100" step="1" value="0" />
              <span class="suffix">%</span>
            </div>
          </div>
          <div class="card" style="padding:14px">
            <div class="label">페이백</div>
            <div id="payback" class="value sm">0 TP<\/div>
            <div class=\"help\">기준: (수수료 − 등급 할인) × 페이백%<\/div>
          </div>
        </div>
      </section>

      <!-- 최종 판매 가격 -->
      <section class="card">
        <div class="label">최종 판매 가격</div>
        <div id="finalSale" class="value" style="font-size:28px">0 TP</div>
        <div class="help">계산식: 판매 금액 + 페이백</div>
      </section>

      <!-- 액션 -->
      <section class="row">
        <button id="reset" class="btn ghost">초기화</button>
        <button id="example" class="btn primary">예시 불러오기 (10억 TP, VIP6)</button>
      </section>

      <section class="note">
        ※ 해리지팡이 (kritikal610) 제작
      </section>
    </div>
  </div>

  <script>
    // ===== 상수 (원본 로직과 동일하게 적용) =====
    const FEE_RATE = 0.40;
    // VIP 그룹: 1~4, 5~7, 8~10, 11~15, 16
    // 각 그룹의 '수수료 할인율' (수수료 금액에서 차감) — 커뮤니티에서 통용되는 값
    const VIP_GROUPS = [
      { label: '1~4', discount: 0 },
      { label: '5~7', discount: 0.07 },
      { label: '8~10', discount: 0.12 },
      { label: '11~15', discount: 0.15 },
      { label: '16', discount: 0.20 },
    ];

    // ===== 유틸 =====
    const nf = new Intl.NumberFormat('ko-KR');
    const $ = (id) => document.getElementById(id);
    const clamp = (n, a, b) => Math.min(b, Math.max(a, n));

    const state = { price: 0, vipIndex: 0, paybackPct: 0 };

    function parseTP(text){
      const only = String(text || '').replace(/[^0-9]/g, '');
      return only ? Math.floor(parseInt(only, 10)) : 0;
    }

    function formatTP(n){
      return `${nf.format(Math.max(0, n|0))} TP`;
    }

    // ===== 계산 =====
    function compute(){
      const fee = Math.floor(state.price * FEE_RATE);
      const vipDiscount = Math.floor(fee * VIP_GROUPS[state.vipIndex].discount);
      const netSale = Math.max(0, state.price - (fee - vipDiscount));
      const paybackBase = Math.max(0, fee - vipDiscount);
      const payback = Math.floor(paybackBase * (clamp(state.paybackPct,0,100) / 100));
      const finalSale = netSale + payback;

      // 렌더
      $('fee').textContent = formatTP(fee);
      $('vipDiscount').textContent = formatTP(vipDiscount);
      $('vipRateText').textContent = `현재 그룹 할인율: ${Math.round(VIP_GROUPS[state.vipIndex].discount * 100)}%`;
      $('netSale').textContent = formatTP(netSale);
      $('payback').textContent = formatTP(payback);
      $('finalSale').textContent = formatTP(finalSale);
    }

    // ===== 이벤트 바인딩 =====
    // 가격 입력
    $('price').addEventListener('input', (e) => {
      const caret = e.target.selectionStart;
      state.price = parseTP(e.target.value);
      e.target.value = state.price.toLocaleString('ko-KR');
      // 커서가 끝으로 가는 현상 최소화
      try { e.target.setSelectionRange(caret, caret); } catch {}
      compute();
    });

    // 페이백 %
    $('paybackPct').addEventListener('input', (e) => {
      const v = Number(e.target.value);
      state.paybackPct = isNaN(v) ? 0 : clamp(Math.floor(v), 0, 100);
      e.target.value = state.paybackPct;
      compute();
    });

    // VIP 버튼 렌더 & 핸들러
    const vipRow = $('vipRow');
    VIP_GROUPS.forEach((g, i) => {
      const btn = document.createElement('button');
      btn.className = 'chip';
      btn.textContent = g.label;
      btn.setAttribute('aria-pressed', i===state.vipIndex ? 'true' : 'false');
      btn.addEventListener('click', () => {
        state.vipIndex = i;
        [...vipRow.children].forEach((el, idx)=>el.setAttribute('aria-pressed', idx===i ? 'true':'false'));
        compute();
      });
      vipRow.appendChild(btn);
    });

    // 초기화 / 예시
    $('reset').addEventListener('click', () => {
      state.price = 0; state.vipIndex = 0; state.paybackPct = 0;
      $('price').value = '';
      $('paybackPct').value = 0;
      [...vipRow.children].forEach((el, idx)=>el.setAttribute('aria-pressed', idx===0 ? 'true':'false'));
      compute();
    });

    $('example').addEventListener('click', () => {
      state.price = 1000000000; state.vipIndex = 1; state.paybackPct = 0;
      $('price').value = state.price.toLocaleString('ko-KR');
      $('paybackPct').value = state.paybackPct;
      [...vipRow.children].forEach((el, idx)=>el.setAttribute('aria-pressed', idx===state.vipIndex ? 'true':'false'));
      compute();
    });

    // 최초 렌더
    compute();
  </script>
</body>
</html>
